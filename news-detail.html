<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°é—»è¯¦æƒ… - å˜‰å­šå ‚</title>
    <meta name="description" content="å˜‰å­šå ‚æ–°é—»è¯¦æƒ…">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600&family=Noto+Serif+SC:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header scrolled" id="header">
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="å˜‰å­šå ‚" class="logo-img">
            </a>
            <nav class="nav" id="nav">
                <a href="index.html" class="nav-link">é¦–é¡µ</a>
                <a href="collections.html" class="nav-link">è—å“å±•ç¤º</a>
                <a href="consignment.html" class="nav-link">å¾é›†æµç¨‹</a>
                <a href="news.html" class="nav-link active">æ–°é—»åŠ¨æ€</a>
                <a href="about.html" class="nav-link">å…³äºæˆ‘ä»¬</a>
            </nav>
            <button class="hamburger" id="hamburger" aria-label="èœå•">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- News Detail -->
    <section class="news-detail">
        <div class="container">
            <div class="news-detail-container">
                <a href="news.html" class="news-back">â† è¿”å›æ–°é—»åˆ—è¡¨</a>
                
                <div class="news-detail-header">
                    <span class="news-detail-category" id="newsCategory">è¡Œä¸šåŠ¨æ€</span>
                    <h1 id="newsTitle">æ–°é—»æ ‡é¢˜</h1>
                    <p class="news-detail-meta" id="newsMeta">å‘å¸ƒæ—¶é—´ï¼š2026-01-01</p>
                </div>
                
                <div class="news-detail-cover">
                    <img id="newsCover" src="" alt="æ–°é—»å°é¢">
                </div>
                
                <div class="news-detail-content" id="newsContent">
                    <!-- æ–°é—»å†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="news-detail-nav" id="newsNav">
                    <!-- ä¸Šä¸‹ç¯‡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3 class="footer-logo"><img src="images/logo.png" alt="å˜‰å­šå ‚" class="footer-logo-img"></h3>
                    <p class="footer-tagline">è®©çå®é‡è§çŸ¥å·±</p>
                </div>
                <div class="footer-contact">
                    <h4 class="footer-title">è”ç³»æˆ‘ä»¬</h4>
                    <p class="footer-item">ğŸ“ ç”µè¯ï¼š400-888-8888</p>
                    <p class="footer-item">ğŸ“§ é‚®ç®±ï¼šservice@jiafutang.com</p>
                    <p class="footer-item">ğŸ“ åœ°å€ï¼šæµ·å—çœæµ·å£åŒºé¾™åå¯Œè±ªèŠ±å›­16å·</p>
                </div>
                <div class="footer-links">
                    <h4 class="footer-title">å¿«é€Ÿé“¾æ¥</h4>
                    <a href="collections.html">è—å“å±•ç¤º</a>
                    <a href="consignment.html">å¾é›†æµç¨‹</a>
                    <a href="about.html">å…³äºæˆ‘ä»¬</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 å˜‰å­šå ‚ ç‰ˆæƒæ‰€æœ‰</p>
            </div>
        </div>
    </footer>

    <script>
        const API_URL = 'https://jiafutang-api.dongranranface.workers.dev';
        const NEWS_CATEGORIES = { all: 'å…¨éƒ¨', brand: 'å˜‰å­šå ‚åŠ¨æ€', industry: 'è¡Œä¸šåŠ¨æ€' };
        
        let news = [];
        
        document.addEventListener('DOMContentLoaded', function() {
            initHeader();
            loadNewsDetail();
        });
        
        function initHeader() {
            const hamburger = document.getElementById('hamburger');
            const nav = document.getElementById('nav');
            if (hamburger && nav) {
                hamburger.addEventListener('click', function() {
                    hamburger.classList.toggle('active');
                    nav.classList.toggle('active');
                });
                nav.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function() {
                        hamburger.classList.remove('active');
                        nav.classList.remove('active');
                    });
                });
            }
        }
        
        async function loadNewsDetail() {
            try {
                const res = await fetch(API_URL + '/api/news');
                news = await res.json();
                
                const id = parseInt(getUrlParam('id')) || 1;
                const item = news.find(n => n.id === id) || news[0];
                
                if (!item) {
                    document.getElementById('newsContent').innerHTML = '<p>æ–°é—»ä¸å­˜åœ¨</p>';
                    return;
                }
                
                document.getElementById('newsCategory').textContent = NEWS_CATEGORIES[item.category] || 'è¡Œä¸šåŠ¨æ€';
                document.getElementById('newsTitle').textContent = item.title;
                document.getElementById('newsMeta').textContent = 'å‘å¸ƒæ—¶é—´ï¼š' + (item.created_at ? new Date(item.created_at).toLocaleDateString('zh-CN') : 'æœ€è¿‘');
                document.getElementById('newsCover').src = item.cover_image;
                
                // å†…å®¹å¤„ç† - æ”¯æŒæ¢è¡Œ
                const content = item.content || item.summary || '';
                document.getElementById('newsContent').innerHTML = content.replace(/\n/g, '<br>');
                
                // ä¸Šä¸‹ç¯‡
                const currentIndex = news.findIndex(n => n.id === item.id);
                const prevNews = news[currentIndex - 1];
                const nextNews = news[currentIndex + 1];
                
                let navHtml = '';
                if (prevNews) {
                    navHtml += `<a href="news-detail.html?id=${prevNews.id}">â† ä¸Šä¸€ç¯‡ï¼š${prevNews.title}</a>`;
                }
                if (nextNews) {
                    navHtml += `<a href="news-detail.html?id=${nextNews.id}">ä¸‹ä¸€ç¯‡ï¼š${nextNews.title} â†’</a>`;
                }
                if (!prevNews && !nextNews) {
                    navHtml = '<span>æš‚æ— å…¶ä»–æ–°é—»</span>';
                }
                document.getElementById('newsNav').innerHTML = navHtml;
            } catch(e) {
                console.error('åŠ è½½å¤±è´¥:', e);
                document.getElementById('newsContent').innerHTML = '<p>åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢</p>';
            }
        }
        
        function getUrlParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }
    </script>
</body>
</html>
