<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è—å“è¯¦æƒ… - å˜‰å­šå ‚</title>
    <meta name="description" content="å˜‰å­šå ‚è—å“è¯¦æƒ…">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600&family=Noto+Serif+SC:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header scrolled" id="header">
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="å˜‰å­šå ‚" class="logo-img">
            </a>
            <nav class="nav" id="nav">
                <a href="index.html" class="nav-link">é¦–é¡µ</a>
                <a href="collections.html" class="nav-link active">è—å“å±•ç¤º</a>
                <a href="consignment.html" class="nav-link">å¾é›†æµç¨‹</a>
                <a href="news.html" class="nav-link">æ–°é—»åŠ¨æ€</a>
                <a href="about.html" class="nav-link">å…³äºæˆ‘ä»¬</a>
            </nav>
            <button class="hamburger" id="hamburger" aria-label="èœå•">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Collection Detail -->
    <section class="collection-detail">
        <div class="container">
            <a href="collections.html" class="news-back">â† è¿”å›è—å“åˆ—è¡¨</a>
            
            <div class="collection-detail-grid">
                <div class="collection-detail-gallery">
                    <img class="collection-main-image" id="collectionMainImage" src="" alt="è—å“å›¾ç‰‡">
                    <div class="collection-thumbnails" id="collectionThumbs">
                        <!-- ç¼©ç•¥å›¾å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="collection-detail-info">
                    <h1 id="collectionTitle">è—å“æ ‡é¢˜</h1>
                    <span class="collection-detail-status" id="collectionStatus">å·²æ‹å–</span>
                    
                    <div class="collection-detail-meta">
                        <span>å“ç±»ï¼š<strong id="collectionCategory">è‰ºæœ¯å“</strong></span>
                        <span>ç¼–å·ï¼š<strong id="collectionId">001</strong></span>
                    </div>
                    
                    <p class="collection-detail-desc" id="collectionDesc">
                        è—å“æè¿°å†…å®¹...
                    </p>
                    
                    <div class="collection-detail-cta">
                        <a href="submission.html" class="btn btn-primary">å’¨è¯¢è¯¦æƒ…</a>
                        <a href="consignment.html" class="btn btn-outline">äº†è§£æµç¨‹</a>
                    </div>
                </div>
            </div>
            
            <!-- ç›¸å…³æ¨è -->
            <div class="collection-related">
                <h2>ç›¸å…³æ¨è</h2>
                <div class="featured-grid" id="relatedGrid">
                    <!-- ç›¸å…³è—å“å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3 class="footer-logo"><img src="images/logo.png" alt="å˜‰å­šå ‚" class="footer-logo-img"></h3>
                    <p class="footer-tagline">è®©çå®é‡è§çŸ¥å·±</p>
                </div>
                <div class="footer-contact">
                    <h4 class="footer-title">è”ç³»æˆ‘ä»¬</h4>
                    <p class="footer-item">ğŸ“ ç”µè¯ï¼š400-888-8888</p>
                    <p class="footer-item">ğŸ“§ é‚®ç®±ï¼šservice@jiafutang.com</p>
                    <p class="footer-item">ğŸ“ åœ°å€ï¼šæµ·å—çœæµ·å£åŒºé¾™åå¯Œè±ªèŠ±å›­16å·</p>
                </div>
                <div class="footer-links">
                    <h4 class="footer-title">å¿«é€Ÿé“¾æ¥</h4>
                    <a href="collections.html">è—å“å±•ç¤º</a>
                    <a href="consignment.html">å¾é›†æµç¨‹</a>
                    <a href="about.html">å…³äºæˆ‘ä»¬</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 å˜‰å­šå ‚ ç‰ˆæƒæ‰€æœ‰</p>
            </div>
        </div>
    </footer>

    <script src="js/data.js?v=20260218"></script>
    <script src="js/main.js?v=20260218"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initHeader();
            // ç­‰å¾…æ•°æ®åŠ è½½
            setTimeout(function() {
                loadCollectionDetail();
            }, 600);
        });
        
        function initHeader() {
            const hamburger = document.getElementById('hamburger');
            const nav = document.getElementById('nav');
            if (hamburger && nav) {
                hamburger.addEventListener('click', function() {
                    hamburger.classList.toggle('active');
                    nav.classList.toggle('active');
                });
                nav.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function() {
                        hamburger.classList.remove('active');
                        nav.classList.remove('active');
                    });
                });
            }
        }
        
        function loadCollectionDetail() {
            const id = parseInt(getUrlParam('id')) || 1;
            const item = collections.find(c => c.id === id) || collections[0];
            
            // ä¸»å›¾ - ä½¿ç”¨ cover_image å­—æ®µ
            document.getElementById('collectionMainImage').src = item.cover_image || item.coverImage;
            document.getElementById('collectionTitle').textContent = item.title;
            
            // çŠ¶æ€
            const statusEl = document.getElementById('collectionStatus');
            statusEl.textContent = COLLECTION_STATUS[item.status];
            statusEl.className = 'collection-detail-status ' + item.status;
            
            // å…ƒä¿¡æ¯
            document.getElementById('collectionCategory').textContent = COLLECTION_CATEGORIES[item.category];
            document.getElementById('collectionId').textContent = String(item.id).padStart(3, '0');
            document.getElementById('collectionDesc').textContent = item.summary || item.content || '';
            
            // ç¼©ç•¥å›¾ - ä½¿ç”¨ cover_image
            const thumbsContainer = document.getElementById('collectionThumbs');
            const coverImg = item.cover_image || item.coverImage;
            thumbsContainer.innerHTML = `
                <div class="collection-thumb active" data-index="0">
                    <img src="${coverImg}" alt="å°é¢å›¾ç‰‡">
                </div>
            `;
            
            // ç¼©ç•¥å›¾ç‚¹å‡»åˆ‡æ¢
            thumbsContainer.querySelectorAll('.collection-thumb').forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const index = this.dataset.index;
                    document.getElementById('collectionMainImage').src = images[index];
                    thumbsContainer.querySelectorAll('.collection-thumb').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // ç›¸å…³æ¨è
            const related = collections.filter(c => c.category === item.category && c.id !== item.id).slice(0, 4);
            const relatedGrid = document.getElementById('relatedGrid');
            relatedGrid.innerHTML = related.map(c => `
                <div class="collection-card" onclick="window.location.href='collection-detail.html?id=${c.id}'">
                    <div class="card-image">
                        <img src="${c.cover_image || c.coverImage}" alt="${c.title}" loading="lazy">
                        <span class="card-status ${c.status}">${COLLECTION_STATUS[c.status]}</span>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${c.title}</h3>
                        <p class="card-meta">
                            <span class="card-category">${COLLECTION_CATEGORIES[c.category]}</span>
                        </p>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
